<!DOCTYPE html>




<html dir="ltr" lang="en-gb">
  <head>
    
  <script src="/javascript/library/raphael-min.js"></script>
  <script src="/javascript/library/treemap-squared-0.5.min.js"></script>
  <style type="text/css">
    span.aside {font-style: italic; font-size: 85%; color: #999;}
    #results {height: 480px;}
    </style>

    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- View -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <title>Charting</title>
    <meta name="description" content="descripts" />
    <meta name="keywords" content="kwds" />

    <link rel="stylesheet" type="text/css" class="ui" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.5/semantic.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/dark.css" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/docs.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/rtl.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/home.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/overlay.css">
    <link rel="stylesheet/less" type="text/css" href="/src/definitions/elements/button.less" />
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Karma:600,400,400italic,600italic' rel='stylesheet' type='text/css'>
    <!-- Standard Meta -->
    <link rel="image_src" type="image/png" href="/images/logo.png" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <link rel="dns-prefetch" href="//ajax.googleapis.com" />
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
    <meta name="ICBM" content="51.96659,-2.481413" />
    <meta name="Robots" content="index, follow" />
    <link rel="icon" href="/images/favicon.svg" type="image/svg+xml" />
    <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/assets/ico/apple-touch-icon-144x144-precomposed.png" />
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/assets/ico/apple-touch-icon-114x114-precomposed.png" />
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/assets/ico/apple-touch-icon-72x72-precomposed.png" />
    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="/images/assets/ico/apple-touch-icon-57-precomposed.png" />
    <link rel="alternate" type="application/atom+xml" href="/feed/atom" title="Atom feed for DOACC" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-migrate/1.2.1/jquery-migrate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.5/semantic.min.js"></script>
    <script type="text/javascript" src="/javascript/rdflib/rdflib.js"></script>

  </head>
  <body id="example" class="index" 
    prefix="dc: http://purl.org/dc/terms/ doacc: http://purl.org/net/bel-epa/doacc# ccs: http://purl.org/net/bel-epa/cc# skos: http://www.w3.org/2004/02/skos/core# foaf: http://xmlns.com/foaf/0.1/ fresnel: http://www.w3.org/2004/09/fresnel#">
    <noscript>
      <div class="noscript">
      Your browser settings show that JavaScript is disabled. (Good call, we too browse with javascript disabled). If you enable it for this site, you’ll get the full benefit of the user-oriented enhancements: nice fonts, drop-down menus, active tabs and the like. We recommend that you turn on Javascript and then refresh this page. <a href="http://www3.qwest.com/cgi-bin/qwest.cfg/php/enduser/std_adp.php?p_faqid=1095" target="_blank">How do I turn on Javascript?</a>
      </div>
    </noscript>
    
  <div class="ui vertical inverted sidebar menu" id="toc">

    <div class="item">
      <a class="ui logo icon image" href="index.html"><img src="/images/logo.png" alt="logo"></a>
      <a href="index.html"><b>DOACC home</b></a>
    </div>
    <div class="item">
      <div class="ui small inverted header">Facts</div>
      <div class="menu">
        <a class="item" href="altcoins.html">altcoins</a>
        <a class="item" href="protectionschemes.html">protection schemes</a>
        <a class="item" href="distributionschemes.html">distribution schemes</a>
      </div>
    </div>
    <div class="item">
      <div class="ui small inverted header">Concepts</div>
      <div class="menu">
        <a class="item" href="doacc-owl.html">DOACC</a>
        <a class="item" href="ccy-owl.html">CCY</a>
      </div>
    </div>
    <div class="item">
      <div class="ui small inverted header">Technology</div>
      <div class="menu">
        <a class="item" href="rdf.html">Making statements</a>
        <a class="item" href="sparql.html">Asking questions</a>
        <a class="item" href="faq.html">FAQ</a>
      </div>
    </div>
  </div>

  <div class="ui black big launch right attached fixed button"> <i class="content icon"></i> <span class="text">Menu</span>
  </div>

  <div class="ui fixed main menu">
    <div class="container">
      <a class="launch item"><i class="content icon"></i> Menu</a>
      <div class="right menu">
      </div>
    </div>
  </div>



    <div class="pusher">
      <div class="full height">
        
      <div class="following bar">
        <div class="ui page grid">
          <div class="column">
            <div class="ui logo shape">
              <div class="sides">
                <div class="active ui side"><a href="/" title="home"><img class="ui image" src="/images/logo.png" alt="Logo"></a></div>
              </div>
            </div>
            <div class="ui inverted right floated secondary menu">
              <a class="ui item" href="facts.html">
                <i class="large icon-rdf"></i> 
                <span class="ui inverted blue header">Facts</span>
              </a>
              <a class="ui item" href="concepts.html">
                <i class="large icon-semantic-web"></i>
                <span class="ui inverted orange header">Concepts</span>
              </a>
              <a class="ui item" href="techniques.html">
                <i class="large icon-semantics"></i>
                <span class="ui inverted green header">Techniques</span>
              </a>
              <a class="ui item" href="altcoins.svg">
                <i class="icon-bitcoin"></i> 
                <span class="ui inverted yellow header">Coins (big)</span>
              </a>
            </div>
            <div class="ui large inverted secondary network menu">
              <a class="view-ui item">
                <i class="sidebar icon"></i> Menu
              </a>
            </div>
          </div>
        </div>
      </div>

        
        <div class="subheader">
          <div class="container">
            <div class="right-content">
              <a href="#">“In theory, theory and practice are the same.<br/>In practice, they are not.”</a> <span class="rth"> - Albert Einstein</span>
            </div>
            <h2 class="ui header inverted">Techniques
              <div class="sub header">how to use DOACC data in your own application / web site.</div>
            </h2>
            <div class="ui divider"></div>
          </div>
        </div>

        <div class="container">
          <div class="ui sub secondary pointing menu">
            <a class="item" href="/techniques.html">Basics</a>
            <a class="item" href="/techniques-rdfa.html">DOM</a>
            <a class="item" href="/techniques-querying.html">Querying</a>
            <a class="item" href="/techniques-javascript.html">Javascript</a>
            <a class="item" href="/techniques-interactive.html">Interactive</a>
            <a class="active item" href="/techniques-charting.html">Charting</a>
            <a class="item" href="/techniques-graphing.html">Graphing</a>
            <a class="item" href="/techniques-adding.html">Adding facts</a>
            <a class="item" href="/techniques-reasoning.html">Reasoning</a>
          </div>

          <h2 class="ui dividing header" id="title">Charting</h2>
          <h3 class="ui header">Squaretree and Raphael</h3>
          <p>An in-browser illustration of a populating a squaretree chart from the DOACC dataset augmented with <a href="/cmdata.n3" title="coinmarketcap graph">price, volume and market capitalisation facts</a> scraped from the Intenet Archive’s <a href="http://web.archive.org/web/20150408221520*/http://coinmarketcap.com/" title="archive.org page for coinmarketcap.com">copies of coinmarketcap web pages</a></p>
          <div id="results">

            <div class="ui active inverted dimmer">
              <div class="ui text loader">Reading from graph</div>
            </div>

          </div>
          <h2 class="ui dividing header" id="code">the code <span class="aside">(as in view source)</span></h2>
          <div class="ui segment">
            <div class="code javascript" data-title="Charting with Tree-square and Rapahel" data-type="javascript">// For quick access to those namespaces:
var FOAF = $rdf.Namespace("http://xmlns.com/foaf/0.1/");
var RDF = $rdf.Namespace("http://www.w3.org/1999/02/22-rdf-syntax-ns#");
var RDFS = $rdf.Namespace("http://www.w3.org/2000/01/rdf-schema#");
var OWL = $rdf.Namespace("http://www.w3.org/2002/07/owl#");
var DC = $rdf.Namespace("http://purl.org/dc/elements/1.1/");
var XSD = $rdf.Namespace("http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#dt-");
var SKOS = $rdf.Namespace("http://www.w3.org/2004/02/skos/core#");
var DOACC = $rdf.Namespace("http://purl.org/net/bel-epa/doacc#");
var CCS = $rdf.Namespace('http://purl.org/net/bel-epa/2015-04/ccs#');

var data = []; 
var labels = [];
var maxd = 0;
var dt;
var listout = function() {
    cmpno = 'cmp-'+'2'; // arbitrary example
    dt = g.any(CCS(cmpno), DC('date'), null); // date, for title
    cmpds = g.each(null, DOACC('cmp'), CCS(cmpno)); // the datapoints for the post
    var res = $.map(cmpds.slice(2,22), function(cmp) {
      var cn = g.any(g.any(cmp, DOACC('cryptocurrency'), null), DOACC('symbol'), null);
      var val = g.any(cmp, DOACC('marketcap'), null);
      return  {"label": cn.value, "value": parseFloat(val.value).toFixed(0)}
    });
    data = $.map(res, function(p) {return p['value'] * 10});
    labels = $.map(res, function(p) {return p['label']});
    maxd = ((Math.max.apply(null, data)/50000)|0)*50000; // sop to squaretree

    var boxFormatter = function (coordinates, index) {
          var datapoint,i, color;
          datapoint = data;
          for (i=0; i&lt;index.length; i++){
              datapoint = datapoint[index[i]];
          }
          var saturation = ((datapoint / maxd)*0.6) + 0.4;
          var brightness = ((datapoint / maxd)*0.3) + 0.2;
          color = "hsb(0." + (Math.random()*(9-1)+1) + "," + saturation + "," + brightness + ")";
          return{ "fill" : color, "fill-opacity": "0.6" };
    };
    $('#results').html(''); // prep
    Treemap.draw(
      "results", 850, 450, data, labels, {
        'label' : {'fill' : 'white'},
        'background' : {'fill': 'url("/images/assets/marble.jpg")'},
        'box' : boxFormatter,
      }
    );
    $('#title').html('coinmarketcap.com, &lt;em>marketcap [2:22] #'+cmpno+' ('+dt+')&lt;/em>'); // guff
};

var g = $rdf.graph();
var docURI = "http://localhost.localdomain/ccs.n3";
var fetch = $rdf.fetcher(g);
fetch.nowOrWhenFetched(docURI,undefined,function(ok, body, xhr){ // @@ check ok
    listout()
});
            </div>
          </div>
          <h2 class="ui dividing header">market capitalisation and price data</h2>
          <h3 class="ui header">Charting</h3>
          <p></p>
          <div class="ui segment">
            <div class="code n3" data-title="Charting with Tree-square and Rapahel" data-type="n3">@prefix ccs: &lt;http://purl.org/net/bel-epa/2015-04/ccs#&gt; .
@prefix dc: &lt;http://purl.org/dc/elements/1.1/&gt; .
@prefix doacc: &lt;http://purl.org/net/bel-epa/doacc#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

ccs:cmp-2 a ccs:CMPost ;
    dc:date "2014-02-25T09:00:00"^^xsd:date ;
    ccs:btc "470.95"^^xsd:float .

ccs:cmpd-100 a css:CMPostDatum ;
    ccs:cmp ccs:cmp-2 ;
    ccs:cryptocurrency doacc:Db39a66a4-5d86-4653-a9ad-ef91f6a970f8 ;
    ccs:daily "0.0"^^xsd:float ;
    ccs:marketcap "6470.0"^^xsd:float ;
    ccs:price "0.005888"^^xsd:float ;
    ccs:qual 2 ;
    ccs:stale false ;
    ccs:volume "0.0"^^xsd:float .
</div>
          </div>
          <div class="ui hidden divider"></div>
        </div>
  
      </div>
    </div>
    
  <div class="ui vertical inverted black footer segment">
    <div class="container">
      <div class="ui stackable inverted divided relaxed grid">

        <div class="four wide column">
          <h3 class="ui blue inverted header">Facts</h3>
          <div class="ui inverted link list">
            <a class="item" href="/facts-protectionschemes.html">protection schemes</a>
            <a class="item" href="/facts-distributionschemes.html">distribution schemes</a>
            <a class="item" href="/facts-powschemes.html">PoW schemes</a>
            <a class="item" href="/facts-posschemes.html">PoS schemes</a>
            <a class="item" href="/facts-protocols.html">protocols</a>
            <a class="item" href="/facts-coins.html">altcoins</a>
          </div>
        </div>

        <div class="four wide column">
          <h3 class="ui orange inverted header">Concepts</h3>
          <div class="ui inverted link list">
            <a class="item" href="doacc-owl.html">DOACC</a>
            <a class="item" href="ccy-owl.html">CCY</a>
          </div>
        </div>

        <div class="four wide column">
          <h3 class="ui green inverted header">Techniques</h3>
          <div class="ui inverted link list">
            <a class="item" href="rdf.html">Adding facts</a>
            <a class="item" href="/techniques-reasoning.html">Reasoning</a>
            <a class="item" href="sparql.html">asking questions</a>
            <a class="item" href="faq.html">FAQ</a>
          </div>
        </div>

        <div class="four wide column">
          <h3 class="ui inverted header">DOACC <img style="padding-left: 1.3rem; height:32px; width:88px; vertical-align:middle;" src="/images/data-badge-5.png" alt="five star open Web data"/></h3>
          <p></p>
          <p class="terms-privacy">made with <i class="icon-rdf icon"></i> in the UK.</p>
          <p class="terms-privacy">&copy; 2015</p>
          <div class="ui inverted link list">
            <a class="terms-privacy" href="about.html">About</a> |
            <a class="terms-privacy" href="privacy-policy.html">Privacy</a> |
            <a class="terms-privacy" href="terms.html">Terms</a>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="ui demo page dimmer">
    <div class="content">
      <div class="center"><h2 class="ui inverted icon header"><i class="mail icon"></i>Dimmer Message<br/><span class="sub header">Dimmer sub-header</span></h2></div>
    </div>
  </div>

  <script type="text/javascript" src="/javascript/jquery/jquery.humane_dates.js"></script>
  <script type="text/javascript" src="/javascript/library/svg.min.js"></script>

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
  <script type="text/javascript" src="/javascript/library/easing.min.js"></script>
  <script type="text/javascript" src="/javascript/library/typing.min.js"></script>
  <script type="text/javascript" src="/javascript/library/n3-browser.min.js"></script>
  <script type="text/javascript" src="/javascript/library/jsonld.js"></script>
  <script src="/javascript/library/js-beautify/beautify.js"></script>
  <script src="/javascript/library/js-beautify/beautify-html.js"></script>
  <script src="/javascript/docs.js"></script>
  <script src="/javascript/home.js"></script>
  <script>
    window.less = {
      async        : true,
      environment  : 'production',
      fileAsync    : false,
      onReady      : false,
      useFileCache : true
    };
  </script>
  <script type="text/javascript" src="/javascript/n3.js"></script>
  <script src="/javascript/library/less.min.js"></script>

  <script type="text/javascript">
    // sgvizler.containerDrawAll("ex");
    $('.ui .item').on('click', function() {
      $('.ui .item').removeClass('active');
      $(this).addClass('active');
    });
    $('.long.test.modal').modal('attach events', '.test.button', 'show');
    $('.ui.modal').modal();
    $('.ui.long.test.modal').modal();
    $("#autocomplete").autocomplete({
      prompt: "", source: "/coin/symbol"});
    $('time').humaneDates();
    $('.accordion').accordion();
    /* beautify all code with class="raw" */
    $('.raw').each(function() {beautify(this)});
  </script>

    
<script type="text/javascript" src="/javascript/jquery/jquery.xdomainajax.js"></script>
<script type="text/javascript">
  // For quick access to those namespaces:
  var FOAF = $rdf.Namespace("http://xmlns.com/foaf/0.1/")
  var RDF = $rdf.Namespace("http://www.w3.org/1999/02/22-rdf-syntax-ns#")
  var RDFS = $rdf.Namespace("http://www.w3.org/2000/01/rdf-schema#")
  var OWL = $rdf.Namespace("http://www.w3.org/2002/07/owl#")
  var DC = $rdf.Namespace("http://purl.org/dc/elements/1.1/")
  var XSD = $rdf.Namespace("http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#dt-")
  var SKOS = $rdf.Namespace("http://www.w3.org/2004/02/skos/core#")
  var DOACC = $rdf.Namespace("http://purl.org/net/bel-epa/doacc#")
  var CCS = $rdf.Namespace('http://purl.org/net/bel-epa/2015-04/ccs#')

  var data = []; 
  var labels = [];
  var maxd = 0;
  var dt;
  var listout = function() {
      cmpno = 'cmp-'+'2'; // arbitrary example
      dt = g.any(CCS(cmpno), DC('date'), null); // date, for title
      cmpds = g.each(null, CCS('cmp'), CCS(cmpno)); // the datapoints for the post
      var res = $.map(cmpds.slice(1,21), function(cmp) {
        var cn = g.any(g.any(cmp, CCS('cryptocurrency'), null), DOACC('symbol'), null);
        var val = g.any(cmp, CCS('marketcap'), null);
        return  {"label": cn.value, "value": parseFloat(val.value).toFixed(0)}
      });
      data = $.map(res, function(p) {return p['value']*10});
      labels = $.map(res, function(p) {return p['label']});
      maxd = ((Math.max.apply(null, data)/50000)|0)*50000; // sop to treesquare

      var boxFormatter = function (coordinates, index) {
            var datapoint,i, color;
            datapoint = data;
            for (i=0; i<index.length; i++){
                datapoint = datapoint[index[i]];
            }  
            var saturation = ((datapoint / maxd)*0.6) + 0.4;
            var brightness = ((datapoint / maxd)*0.3) + 0.2;
            color = "hsb(0." + (Math.random() * (9 - 1) + 1) + "," + saturation + "," + brightness + ")";
            return{ "fill" : color, "fill-opacity": "0.6" };
      };
      $('#results').html(''); // nuke spinner
      Treemap.draw(
        "results", 850, 450, data, labels, {
          'label' : {'fill' : 'white'},
          'background' : {'fill': 'url("/images/assets/marble.jpg")'},
          'box' : boxFormatter,
        }
      );
      $('#title').html('coinmarketcap.com, <em>marketcap [1:21] #'+cmpno+' ('+dt+')</em>'); // guff
  };

  var g = $rdf.graph();
  var docURI = "http://ashpool.bel-epa.com/ccs.n3";
  var fetch = $rdf.fetcher(g);
  fetch.nowOrWhenFetched(docURI,undefined,function(ok, body, xhr){ // @@ check ok
      listout()
  });
</script>

  </body>
</html>
